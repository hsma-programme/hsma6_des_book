<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HSMA - the little book of DES - 9&nbsp; Warm Up Periods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./visualising_model_metrics.html" rel="next">
<link href="./extending_your_model.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="include/webex.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./extending_your_model.html">extending_your_model.html</a></li><li class="breadcrumb-item"><a href="./model_warm_up.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Warm Up Periods</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">HSMA - the little book of DES</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_to_des_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to DES Concepts</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro_to_simpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">An Introduction to SimPy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./recommended_structure_classes_for_des_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">The Recommended Structure for DES Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">your_first_simpy_model.qmd</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./an_example_simpy_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">An example simpy model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./an_example_simpy_model_multiple_steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">An example simpy model - multiple activities</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./an_example_simpy_model_branching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">An example simpy model - branching paths</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise_gp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Required outputs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./extending_your_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">extending_your_model.html</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_warm_up.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Warm Up Periods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualising_model_metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">visualising_model_metrics.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./priority_based_queueing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">priority_based_queueing.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_resource_unavailability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">modelling_resource_unavailability.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./choosing_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">choosing_distributions.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reneging_balking_jockeying.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Reneging, balking and jockeying</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise_des_advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">exercise_des_advanced.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./advanced_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">advanced_concepts.html</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualising_des_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">visualising_des_models.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_large_numbers_scenarios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">testing_large_numbers_scenarios.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_variable_arrival_rates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">modelling_variable_arrival_rates.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appointment_style_booking_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">appointment_style_booking_models.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./requesting_multiple_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">requesting_multiple_resources.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./choosing_resource_from_many.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">choosing_resource_from_many.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./running_parallel_cpus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">running_parallel_cpus.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./alternative_foss_simulation_libraries_software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">alternative_foss_simulation_libraries_software.html</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#how-long-should-a-warm-up-period-be" id="toc-how-long-should-a-warm-up-period-be" class="nav-link active" data-scroll-target="#how-long-should-a-warm-up-period-be"><span class="header-section-number">9.1</span> How long should a warm-up period be?</a></li>
  <li><a href="#implementing-the-warm-up-period" id="toc-implementing-the-warm-up-period" class="nav-link" data-scroll-target="#implementing-the-warm-up-period"><span class="header-section-number">9.2</span> Implementing the warm-up period</a>
  <ul class="collapse">
  <li><a href="#the-g-class" id="toc-the-g-class" class="nav-link" data-scroll-target="#the-g-class"><span class="header-section-number">9.2.1</span> The g class</a></li>
  <li><a href="#the-patient-class" id="toc-the-patient-class" class="nav-link" data-scroll-target="#the-patient-class"><span class="header-section-number">9.2.2</span> The patient class</a></li>
  <li><a href="#the-model-class" id="toc-the-model-class" class="nav-link" data-scroll-target="#the-model-class"><span class="header-section-number">9.2.3</span> The model class</a></li>
  <li><a href="#the-calculate_run_results-method" id="toc-the-calculate_run_results-method" class="nav-link" data-scroll-target="#the-calculate_run_results-method"><span class="header-section-number">9.2.4</span> the calculate_run_results method</a></li>
  <li><a href="#the-trial-class" id="toc-the-trial-class" class="nav-link" data-scroll-target="#the-trial-class"><span class="header-section-number">9.2.5</span> The Trial class</a></li>
  </ul></li>
  <li><a href="#the-impact-of-the-warm-up-period" id="toc-the-impact-of-the-warm-up-period" class="nav-link" data-scroll-target="#the-impact-of-the-warm-up-period"><span class="header-section-number">9.3</span> The impact of the warm-up period</a>
  <ul class="collapse">
  <li><a href="#editing-our-results-method" id="toc-editing-our-results-method" class="nav-link" data-scroll-target="#editing-our-results-method"><span class="header-section-number">9.3.1</span> Editing our results method</a></li>
  <li><a href="#the-full-updated-code" id="toc-the-full-updated-code" class="nav-link" data-scroll-target="#the-full-updated-code"><span class="header-section-number">9.3.2</span> The full updated code</a></li>
  <li><a href="#comparing-the-results" id="toc-comparing-the-results" class="nav-link" data-scroll-target="#comparing-the-results"><span class="header-section-number">9.3.3</span> Comparing the results</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./extending_your_model.html">extending_your_model.html</a></li><li class="breadcrumb-item"><a href="./model_warm_up.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Warm Up Periods</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Warm Up Periods</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In the models we’ve created so far patients start coming in when the service opens, and then all leave when it closes.</p>
<p>But what if our system isn’t like that? What if we have a system that is never empty - like an Emergency Department?</p>
<p>By default, a DES model assumes that our system is empty at the start of a simulation run. But if we were modelling an ED, that would skew (throw off) our results, as the initial period during which patients were coming in to an empty system wouldn’t represent what’s happening in the real world - known as the <strong>Initialisation Bias</strong>.</p>
<p>The solution to this in DES modelling is to use a Warm Up Period.</p>
<p>The idea of a warm up period is simple. We run the model as normal - from empty - but for a period of time (the warm up period) we don’t collect results.</p>
<p>The model continues to run as normal, it’s just we don’t count what’s happening.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you don’t use a warm-up period, you may find that the average waits you give are a lot lower than the true state - the average will be pulled lower by the earlier period of results before queues build up to their normal levels.</p>
</div>
</div>
<section id="how-long-should-a-warm-up-period-be" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="how-long-should-a-warm-up-period-be"><span class="header-section-number">9.1</span> How long should a warm-up period be?</h2>
<p>The length of the warm up period is up to you as the modeller to define.</p>
<p>You could be very precise about analysing it and use statistical testing to identify when the system reaches equilibrium (see https://eudl.eu/pdf/10.4108/ICST.SIMUTOOLS2009.5603 as an example).</p>
<p>Or you could plot what’s happening over time by eye and make an estimate.</p>
<p>Or you could just set your warm up period long enough that it’ll be representative when it starts collecting results.</p>
</section>
<section id="implementing-the-warm-up-period" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="implementing-the-warm-up-period"><span class="header-section-number">9.2</span> Implementing the warm-up period</h2>
<p>Implementing a warm up period in SimPy is really easy.</p>
<p>We just simply check the current time whenever we go to calculate / store a result, and see if it’s beyond the warm up period. If it is, we do it. If it’s not, we don’t.</p>
<p>Let’s look at an example. This is a slightly amended version of the model of patients coming in for a nurse consultation with a few tweaks (longer duration, more runs, added trial results calculation)</p>
<p>We’re going to assume this is a system that’s open 24 hours - let’s imagine this is a triage function at an emergency department.</p>
<p>I’ve marked the bits I’ve added to include warm up with ##NEW</p>
<section id="the-g-class" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="the-g-class"><span class="header-section-number">9.2.1</span> The g class</h3>
<p>First we add in a new parameter - the length of the warm-up period.</p>
<p>Here, the sim duration has been set to 2880, and the warm-up-period to half of this (1440). You don’t need to stick to this pattern - your warm-up could even be longer than your results collection if you want!</p>
<div id="g_class" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Class to store global parameter values.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> g:</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Inter-arrival times</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    patient_inter <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Activity times</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    mean_n_consult_time <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Resource numbers</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    number_of_nurses <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulation meta parameters</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    sim_duration <span class="op">=</span> <span class="dv">2880</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    warm_up_period <span class="op">=</span> <span class="dv">1440</span> <span class="co">##NEW - this will be in addition to the sim_duration</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    number_of_runs <span class="op">=</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you find it easier to keep track of, you could define your warm-up like this instead.</p>
<div id="g_class_alt" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>results_collection_period <span class="op">=</span> <span class="dv">2880</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>warm_up_period <span class="op">=</span> <span class="dv">1440</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>total_sim_duration <span class="op">=</span> results_collection_period <span class="op">+</span> warm_up_period</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="the-patient-class" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="the-patient-class"><span class="header-section-number">9.2.2</span> The patient class</h3>
<p>Our patient class is unchanged.</p>
</section>
<section id="the-model-class" class="level3" data-number="9.2.3">
<h3 data-number="9.2.3" class="anchored" data-anchor-id="the-model-class"><span class="header-section-number">9.2.3</span> The model class</h3>
<p>In the model class, the ‘attend_clinic’ method changes.</p>
<p>We look at the current elapsed simulation time with the attribute <code>self.env.now</code></p>
<p>Then, whenever a patient attends the clinic and is using a nurse resource, we check whether the current simulation time is later than the number of time units we’ve set as our warm-up.</p>
<section id="the-attend_clinic-method" class="level4" data-number="9.2.3.1">
<h4 data-number="9.2.3.1" class="anchored" data-anchor-id="the-attend_clinic-method"><span class="header-section-number">9.2.3.1</span> The attend_clinic method</h4>
<div id="attend_clinic_func" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generator function representing pathway for patients attending the</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># clinic.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attend_clinic(<span class="va">self</span>, patient):</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Nurse consultation activity</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    start_q_nurse <span class="op">=</span> <span class="va">self</span>.env.now</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="va">self</span>.nurse.request() <span class="im">as</span> req:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> req</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        end_q_nurse <span class="op">=</span> <span class="va">self</span>.env.now</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        patient.q_time_nurse <span class="op">=</span> end_q_nurse <span class="op">-</span> start_q_nurse</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">##NEW - this checks whether the warm up period has passed before</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># adding any results</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.env.now <span class="op">&gt;</span> g.warm_up_period:</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.results_df.at[patient.<span class="bu">id</span>, <span class="st">"Q Time Nurse"</span>] <span class="op">=</span> (</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>                patient.q_time_nurse</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        sampled_nurse_act_time <span class="op">=</span> random.expovariate(<span class="fl">1.0</span> <span class="op">/</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>                                                    g.mean_n_consult_time)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> <span class="va">self</span>.env.timeout(sampled_nurse_act_time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For example, if the simulation time is at 840 and our warm_up is 1440, this bit of code - which adds the queuing time for this patient to our records - won’t run:</p>
<div id="warm_up_bypassed_code" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">self</span>.results_df.at[patient.<span class="bu">id</span>, <span class="st">"Q Time Nurse"</span>] <span class="op">=</span> (</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    patient.q_time_nurse</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, if the simulation time is 1680, for example, it will.</p>
</section>
</section>
<section id="the-calculate_run_results-method" class="level3" data-number="9.2.4">
<h3 data-number="9.2.4" class="anchored" data-anchor-id="the-calculate_run_results-method"><span class="header-section-number">9.2.4</span> the calculate_run_results method</h3>
<p>As we now won’t count the first patient, we need to remove the dummy first patient result entry we created when we set up the dataframe.</p>
<div id="dummy_remove" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method to calculate and store results over the run</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_run_results(<span class="va">self</span>):</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.results_df.drop([<span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>) <span class="co">##NEW</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.mean_q_time_nurse <span class="op">=</span> <span class="va">self</span>.results_df[<span class="st">"Q Time Nurse"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="the-run-method" class="level4" data-number="9.2.4.1">
<h4 data-number="9.2.4.1" class="anchored" data-anchor-id="the-run-method"><span class="header-section-number">9.2.4.1</span> The run method</h4>
<p>Next we need to tweak the duration of our model to reflect the combination of the period we want to collect results for and the warm-up period.</p>
<div id="single_run" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method to run a single run of the simulation</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(<span class="va">self</span>):</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start up DES generators</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.env.process(<span class="va">self</span>.generator_patient_arrivals())</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run for the duration specified in g class</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">##NEW - we need to tell the simulation to run for the specified duration</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># + the warm up period if we still want the specified duration in full</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.env.run(until<span class="op">=</span>(g.sim_duration <span class="op">+</span> g.warm_up_period))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate results over the run</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.calculate_run_results()</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Print patient level results for this run</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span> (<span class="ss">f"Run Number </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>run_number<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span> (<span class="va">self</span>.results_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-trial-class" class="level3" data-number="9.2.5">
<h3 data-number="9.2.5" class="anchored" data-anchor-id="the-trial-class"><span class="header-section-number">9.2.5</span> The Trial class</h3>
<p>Our trial class is unchanged.</p>
</section>
</section>
<section id="the-impact-of-the-warm-up-period" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="the-impact-of-the-warm-up-period"><span class="header-section-number">9.3</span> The impact of the warm-up period</h2>
<p>Let’s compare the results we get with and without the warm-up period.</p>
<section id="editing-our-results-method" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="editing-our-results-method"><span class="header-section-number">9.3.1</span> Editing our results method</h3>
<p>To make it easier to look at the outputs, I’m going to modify two methods slightl.</p>
<p>First, we modify the <code>run</code> method of the <code>Model</code> class slightly to swap from print the patient level dataframes to returning them as an output.</p>
<div id="dc58c7d0" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method to run a single run of the simulation</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run(<span class="va">self</span>):</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start up DES generators</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.env.process(<span class="va">self</span>.generator_patient_arrivals())</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run for the duration specified in g class</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We need to tell the simulation to run for the specified duration</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># + the warm up period if we still want the specified duration in full</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.env.run(until<span class="op">=</span>(g.sim_duration <span class="op">+</span> g.warm_up_period))</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate results over the run</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.calculate_run_results()</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return patient level results for this run</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="va">self</span>.results_df) <span class="co">##NEW</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we modify the <code>run_trial</code> method of the <code>Trial</code> class so that we get multiple outputs: the full patient level dataframes, a summary of results per trial, and an overall average figure for all of the trials.</p>
<div id="edited_results_method" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Method to run a trial</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> run_trial(<span class="va">self</span>):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run the simulation for the number of runs specified in g class.</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># For each run, we create a new instance of the Model class and call its</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># run method, which sets everything else in motion.  Once the run has</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># completed, we grab out the stored run results and store it against</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the run number in the trial results dataframe. We also return the</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># full patient-level dataframes.</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># First, create an empty list for storing our patient-level dataframes.</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    results_dfs <span class="op">=</span> []</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">range</span>(g.number_of_runs):</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        my_model <span class="op">=</span> Model(run)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        patient_level_results <span class="op">=</span> my_model.run()</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>( <span class="va">self</span>.df_trial_results)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># First let's record our mean wait time for this run</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.df_trial_results.loc[run] <span class="op">=</span> [my_model.mean_q_time_nurse]</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Next let's work on our patient-level results dataframes</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># We start by rounding everything to 2 decimal places</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        patient_level_results <span class="op">=</span> patient_level_results.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add a new column recording the run</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>        patient_level_results[<span class="st">'run'</span>] <span class="op">=</span> run</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Now we're just going to add this to our empty list (or, after the first</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># time we loop through, as an extra dataframe in our list)</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        results_dfs.append(patient_level_results)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    all_results_patient_level <span class="op">=</span> pd.concat(results_dfs)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This calculates the attribute self.mean_q_time_nurse_trial</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.calculate_means_over_trial()</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Once the trial (ie all runs) has completed, return the results</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">self</span>.df_trial_results, all_results_patient_level, <span class="va">self</span>.mean_q_time_nurse_trial</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-full-updated-code" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="the-full-updated-code"><span class="header-section-number">9.3.2</span> The full updated code</h3>
<div id="code_full_warm_up" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> simpy</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Class to store global parameter values.</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> g:</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Inter-arrival times</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    patient_inter <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Activity times</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    mean_n_consult_time <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Resource numbers</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    number_of_nurses <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulation meta parameters</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    sim_duration <span class="op">=</span> <span class="dv">2880</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    number_of_runs <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    warm_up_period <span class="op">=</span> <span class="dv">1440</span> <span class="co">##NEW - this will be in addition to the sim_duration</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Class representing patients coming in to the clinic.</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Patient:</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, p_id):</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.<span class="bu">id</span> <span class="op">=</span> p_id</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.q_time_nurse <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Class representing our model of the clinic.</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Model:</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Constructor</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, run_number):</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set up SimPy environment</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.env <span class="op">=</span> simpy.Environment()</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set up counters to use as entity IDs</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.patient_counter <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set up resources</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.nurse <span class="op">=</span> simpy.Resource(<span class="va">self</span>.env, capacity<span class="op">=</span>g.number_of_nurses)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set run number from value passed in</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.run_number <span class="op">=</span> run_number</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set up DataFrame to store patient-level results</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.results_df <span class="op">=</span> pd.DataFrame()</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.results_df[<span class="st">"Patient ID"</span>] <span class="op">=</span> [<span class="dv">1</span>]</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.results_df[<span class="st">"Q Time Nurse"</span>] <span class="op">=</span> [<span class="fl">0.0</span>]</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.results_df.set_index(<span class="st">"Patient ID"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set up attributes that will store mean queuing times across the run</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.mean_q_time_nurse <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generator function that represents the DES generator for patient arrivals</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> generator_patient_arrivals(<span class="va">self</span>):</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.patient_counter <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> Patient(<span class="va">self</span>.patient_counter)</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.env.process(<span class="va">self</span>.attend_clinic(p))</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>            sampled_inter <span class="op">=</span> random.expovariate(<span class="fl">1.0</span> <span class="op">/</span> g.patient_inter)</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> <span class="va">self</span>.env.timeout(sampled_inter)</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generator function representing pathway for patients attending the</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># clinic.</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> attend_clinic(<span class="va">self</span>, patient):</span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Nurse consultation activity</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>        start_q_nurse <span class="op">=</span> <span class="va">self</span>.env.now</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="va">self</span>.nurse.request() <span class="im">as</span> req:</span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> req</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>            end_q_nurse <span class="op">=</span> <span class="va">self</span>.env.now</span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>            patient.q_time_nurse <span class="op">=</span> end_q_nurse <span class="op">-</span> start_q_nurse</span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>            <span class="co">##NEW - this checks whether the warm up period has passed before</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>            <span class="co"># adding any results</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="va">self</span>.env.now <span class="op">&gt;</span> g.warm_up_period:</span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.results_df.at[patient.<span class="bu">id</span>, <span class="st">"Q Time Nurse"</span>] <span class="op">=</span> (</span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>                    patient.q_time_nurse</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>            sampled_nurse_act_time <span class="op">=</span> random.expovariate(<span class="fl">1.0</span> <span class="op">/</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>                                                        g.mean_n_consult_time)</span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> <span class="va">self</span>.env.timeout(sampled_nurse_act_time)</span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method to calculate and store results over the run</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> calculate_run_results(<span class="va">self</span>):</span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>        <span class="co">##NEW - as we now won't count the first patient, we need to remove</span></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>        <span class="co"># the dummy first patient result entry we created when we set up the</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>        <span class="co"># dataframe</span></span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.results_df.drop([<span class="dv">1</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.mean_q_time_nurse <span class="op">=</span> <span class="va">self</span>.results_df[<span class="st">"Q Time Nurse"</span>].mean()</span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method to run a single run of the simulation</span></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> run(<span class="va">self</span>):</span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Start up DES generators</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.env.process(<span class="va">self</span>.generator_patient_arrivals())</span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Run for the duration specified in g class</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>        <span class="co">##NEW - we need to tell the simulation to run for the specified duration</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>        <span class="co"># + the warm up period if we still want the specified duration in full</span></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.env.run(until<span class="op">=</span>(g.sim_duration <span class="op">+</span> g.warm_up_period))</span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Calculate results over the run</span></span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.calculate_run_results()</span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Return patient level results for this run</span></span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="va">self</span>.results_df)</span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a><span class="co"># Class representing a Trial for our simulation</span></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Trial:</span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Constructor</span></span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span>  <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.df_trial_results <span class="op">=</span> pd.DataFrame()</span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.df_trial_results[<span class="st">"Run Number"</span>] <span class="op">=</span> [<span class="dv">0</span>]</span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.df_trial_results[<span class="st">"Mean Q Time Nurse"</span>] <span class="op">=</span> [<span class="fl">0.0</span>]</span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.df_trial_results.set_index(<span class="st">"Run Number"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method to calculate and store means across runs in the trial</span></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> calculate_means_over_trial(<span class="va">self</span>):</span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.mean_q_time_nurse_trial <span class="op">=</span> (</span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.df_trial_results[<span class="st">"Mean Q Time Nurse"</span>].mean()</span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> run_trial(<span class="va">self</span>):</span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Run the simulation for the number of runs specified in g class.</span></span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a>        <span class="co"># For each run, we create a new instance of the Model class and call its</span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a>        <span class="co"># run method, which sets everything else in motion.  Once the run has</span></span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a>        <span class="co"># completed, we grab out the stored run results and store it against</span></span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a>        <span class="co"># the run number in the trial results dataframe. We also return the</span></span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a>        <span class="co"># full patient-level dataframes.</span></span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a>        <span class="co"># First, create an empty list for storing our patient-level dataframes.</span></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a>        results_dfs <span class="op">=</span> []</span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> run <span class="kw">in</span> <span class="bu">range</span>(g.number_of_runs):</span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a>            my_model <span class="op">=</span> Model(run)</span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a>            patient_level_results <span class="op">=</span> my_model.run()</span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>( <span class="va">self</span>.df_trial_results)</span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a>            <span class="co"># First let's record our mean wait time for this run</span></span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.df_trial_results.loc[run] <span class="op">=</span> [my_model.mean_q_time_nurse]</span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Next let's work on our patient-level results dataframes</span></span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a>            <span class="co"># We start by rounding everything to 2 decimal places</span></span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a>            patient_level_results <span class="op">=</span> patient_level_results.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Add a new column recording the run</span></span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a>            patient_level_results[<span class="st">'run'</span>] <span class="op">=</span> run</span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Now we're just going to add this to our empty list (or, after the first</span></span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a>            <span class="co"># time we loop through, as an extra dataframe in our list)</span></span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a>            results_dfs.append(patient_level_results)</span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a>        all_results_patient_level <span class="op">=</span> pd.concat(results_dfs)</span>
<span id="cb9-159"><a href="#cb9-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-160"><a href="#cb9-160" aria-hidden="true" tabindex="-1"></a>        <span class="co"># This calculates the attribute self.mean_q_time_nurse_trial</span></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.calculate_means_over_trial()</span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Once the trial (ie all runs) has completed, return the results</span></span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.df_trial_results, all_results_patient_level, <span class="va">self</span>.mean_q_time_nurse_trial</span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Method to print trial results, including averages across runs</span></span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> print_trial_results(<span class="va">self</span>):</span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (<span class="st">"Trial Results"</span>)</span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (<span class="va">self</span>.df_trial_results)</span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span> (<span class="ss">f"Mean Q Nurse : </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>mean_q_time_nurse_trial<span class="sc">:.1f}</span><span class="ss"> minutes"</span>)</span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new instance of Trial and run it</span></span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a>my_trial <span class="op">=</span> Trial()</span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a>df_trial_results_warmup, all_results_patient_level_warmup, means_over_trial_warmup <span class="op">=</span> my_trial.run_trial()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Mean Q Time Nurse
Run Number                   
0                         0.0
            Mean Q Time Nurse
Run Number                   
0                   513.99245
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
55                 537.048571
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
55                 537.048571
56                 489.520113
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
55                 537.048571
56                 489.520113
57                 422.443054
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
55                 537.048571
56                 489.520113
57                 422.443054
58                 569.080717
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
5                  451.522178
6                  538.698778
7                  519.633130
8                  463.314280
9                  422.933638
10                 411.477063
11                 585.233447
12                 238.321761
13                 345.223649
14                 691.310240
15                 471.684437
16                 339.024053
17                 653.780123
18                 645.409646
19                 720.884036
20                 397.494985
21                 486.191353
22                 436.659273
23                 314.635596
24                 413.575644
25                 199.628767
26                 541.317312
27                 581.302578
28                 389.038314
29                 550.189996
30                 482.154719
31                 601.290914
32                 396.926201
33                 522.939013
34                 388.407895
35                 527.598629
36                 618.209680
37                 422.176389
38                 544.668324
39                 673.063809
40                 268.426444
41                 597.301355
42                 490.752829
43                 603.698452
44                 767.884524
45                 319.543307
46                 383.757877
47                 347.978641
48                 390.248638
49                 403.928781
50                 441.724778
51                 675.356778
52                 248.664278
53                 517.518301
54                 612.998137
55                 537.048571
56                 489.520113
57                 422.443054
58                 569.080717
59                 611.057219
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
56                 489.520113
57                 422.443054
58                 569.080717
59                 611.057219
60                 385.584858

[61 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
57                 422.443054
58                 569.080717
59                 611.057219
60                 385.584858
61                 636.914507

[62 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
58                 569.080717
59                 611.057219
60                 385.584858
61                 636.914507
62                 675.652217

[63 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
59                 611.057219
60                 385.584858
61                 636.914507
62                 675.652217
63                 417.991709

[64 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
60                 385.584858
61                 636.914507
62                 675.652217
63                 417.991709
64                 721.950577

[65 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
61                 636.914507
62                 675.652217
63                 417.991709
64                 721.950577
65                 531.725743

[66 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
62                 675.652217
63                 417.991709
64                 721.950577
65                 531.725743
66                 465.994131

[67 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
63                 417.991709
64                 721.950577
65                 531.725743
66                 465.994131
67                 390.657597

[68 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
64                 721.950577
65                 531.725743
66                 465.994131
67                 390.657597
68                 290.712280

[69 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
65                 531.725743
66                 465.994131
67                 390.657597
68                 290.712280
69                 251.182371

[70 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
66                 465.994131
67                 390.657597
68                 290.712280
69                 251.182371
70                 288.014001

[71 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
67                 390.657597
68                 290.712280
69                 251.182371
70                 288.014001
71                 518.692098

[72 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
68                 290.712280
69                 251.182371
70                 288.014001
71                 518.692098
72                 565.821476

[73 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
69                 251.182371
70                 288.014001
71                 518.692098
72                 565.821476
73                 670.620361

[74 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
70                 288.014001
71                 518.692098
72                 565.821476
73                 670.620361
74                 473.081966

[75 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
71                 518.692098
72                 565.821476
73                 670.620361
74                 473.081966
75                 689.065706

[76 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
72                 565.821476
73                 670.620361
74                 473.081966
75                 689.065706
76                 382.151092

[77 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
73                 670.620361
74                 473.081966
75                 689.065706
76                 382.151092
77                 451.331433

[78 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
74                 473.081966
75                 689.065706
76                 382.151092
77                 451.331433
78                 348.012909

[79 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
75                 689.065706
76                 382.151092
77                 451.331433
78                 348.012909
79                 597.884532

[80 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
76                 382.151092
77                 451.331433
78                 348.012909
79                 597.884532
80                 564.784670

[81 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
77                 451.331433
78                 348.012909
79                 597.884532
80                 564.784670
81                 321.534574

[82 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
78                 348.012909
79                 597.884532
80                 564.784670
81                 321.534574
82                 699.899445

[83 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
79                 597.884532
80                 564.784670
81                 321.534574
82                 699.899445
83                 574.890494

[84 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
80                 564.784670
81                 321.534574
82                 699.899445
83                 574.890494
84                 376.728664

[85 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
81                 321.534574
82                 699.899445
83                 574.890494
84                 376.728664
85                 419.569130

[86 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
82                 699.899445
83                 574.890494
84                 376.728664
85                 419.569130
86                 310.571053

[87 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
83                 574.890494
84                 376.728664
85                 419.569130
86                 310.571053
87                 439.409339

[88 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
84                 376.728664
85                 419.569130
86                 310.571053
87                 439.409339
88                 676.154306

[89 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
85                 419.569130
86                 310.571053
87                 439.409339
88                 676.154306
89                 400.938191

[90 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
86                 310.571053
87                 439.409339
88                 676.154306
89                 400.938191
90                 454.673769

[91 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
87                 439.409339
88                 676.154306
89                 400.938191
90                 454.673769
91                 628.068667

[92 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
88                 676.154306
89                 400.938191
90                 454.673769
91                 628.068667
92                 538.356685

[93 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
89                 400.938191
90                 454.673769
91                 628.068667
92                 538.356685
93                 501.765330

[94 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
90                 454.673769
91                 628.068667
92                 538.356685
93                 501.765330
94                 437.006974

[95 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
91                 628.068667
92                 538.356685
93                 501.765330
94                 437.006974
95                 419.031017

[96 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
92                 538.356685
93                 501.765330
94                 437.006974
95                 419.031017
96                 488.916348

[97 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
93                 501.765330
94                 437.006974
95                 419.031017
96                 488.916348
97                 470.282801

[98 rows x 1 columns]
            Mean Q Time Nurse
Run Number                   
0                  513.992450
1                  437.487857
2                  777.081370
3                  445.082177
4                  839.353321
...                       ...
94                 437.006974
95                 419.031017
96                 488.916348
97                 470.282801
98                 289.341673

[99 rows x 1 columns]</code></pre>
</div>
</div>
<div id="code_full_no_warm_up" class="cell" data-execution_count="10">
<div class="cell-output cell-output-stdout">
<pre><code>            Mean Q Time Nurse
Run Number                   
0                         0.0
            Mean Q Time Nurse
Run Number                   
0                   14.109274
            Mean Q Time Nurse
Run Number                   
0                   14.109274
1                   11.622866
            Mean Q Time Nurse
Run Number                   
0                   14.109274
1                   11.622866
2                   21.615963
            Mean Q Time Nurse
Run Number                   
0                   14.109274
1                   11.622866
2                   21.615963
3                   12.935061</code></pre>
</div>
</div>
</section>
<section id="comparing-the-results" class="level3" data-number="9.3.3">
<h3 data-number="9.3.3" class="anchored" data-anchor-id="comparing-the-results"><span class="header-section-number">9.3.3</span> Comparing the results</h3>
<section id="patient-level-dataframes" class="level4" data-number="9.3.3.1">
<h4 data-number="9.3.3.1" class="anchored" data-anchor-id="patient-level-dataframes"><span class="header-section-number">9.3.3.1</span> Patient-level dataframes</h4>
<p>First, let’s look at the first five rows of our patient dataframes.</p>
<p>Without the warm-up, our patient IDs start at 1.</p>
<section id="without-warm-up" class="level5" data-number="9.3.3.1.1">
<h5 data-number="9.3.3.1.1" class="anchored" data-anchor-id="without-warm-up"><span class="header-section-number">9.3.3.1.1</span> Without warm-up</h5>
<div id="cell-results_p_level_head" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>all_results_patient_level.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="results_p_level_head" class="cell-output cell-output-display" data-execution_count="45">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Q Time Nurse</th>
<th data-quarto-table-cell-role="th">Time with Nurse</th>
<th data-quarto-table-cell-role="th">run</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Patient ID</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.00</td>
<td>6.01</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>3.49</td>
<td>1.79</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.00</td>
<td>0.07</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>0.00</td>
<td>3.03</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>0.26</td>
<td>17.26</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="with-warm-up" class="level5" data-number="9.3.3.1.2">
<h5 data-number="9.3.3.1.2" class="anchored" data-anchor-id="with-warm-up"><span class="header-section-number">9.3.3.1.2</span> With warm-up</h5>
<p>With the warm-up, our patient IDs start later.</p>
<div id="cell-results_warmup_p_level_head" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>all_results_patient_level_warmup.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="results_warmup_p_level_head" class="cell-output cell-output-display" data-execution_count="46">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Q Time Nurse</th>
<th data-quarto-table-cell-role="th">run</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Patient ID</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">229</td>
<td>222.70</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">230</td>
<td>225.94</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">231</td>
<td>223.13</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">232</td>
<td>225.79</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">233</td>
<td>221.51</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="per-run-results" class="level4" data-number="9.3.3.2">
<h4 data-number="9.3.3.2" class="anchored" data-anchor-id="per-run-results"><span class="header-section-number">9.3.3.2</span> Per-run results</h4>
<section id="without-warm-up-1" class="level5" data-number="9.3.3.2.1">
<h5 data-number="9.3.3.2.1" class="anchored" data-anchor-id="without-warm-up-1"><span class="header-section-number">9.3.3.2.1</span> Without warm-up</h5>
<div id="cell-results_trial_level_head" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>df_trial_results.<span class="bu">round</span>(<span class="dv">2</span>).head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="results_trial_level_head" class="cell-output cell-output-display" data-execution_count="47">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean Q Time Nurse</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Run Number</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>14.11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>11.62</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>21.62</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>12.94</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>14.51</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="with-warm-up-1" class="level5" data-number="9.3.3.2.2">
<h5 data-number="9.3.3.2.2" class="anchored" data-anchor-id="with-warm-up-1"><span class="header-section-number">9.3.3.2.2</span> With warm-up</h5>
<p>With the warm-up, our patient IDs start later.</p>
<div id="cell-results_warmup_trial_level_head" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df_trial_results_warmup.<span class="bu">round</span>(<span class="dv">2</span>).head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="results_warmup_trial_level_head" class="cell-output cell-output-display" data-execution_count="48">
<div>
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean Q Time Nurse</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Run Number</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>513.99</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>437.49</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>777.08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>445.08</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>839.35</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="overall-results" class="level4" data-number="9.3.3.3">
<h4 data-number="9.3.3.3" class="anchored" data-anchor-id="overall-results"><span class="header-section-number">9.3.3.3</span> Overall results</h4>
<p>Without the warm up, our overall average wait time is</p>
<div id="cec8cd44" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>means_over_trial<span class="sc">}</span><span class="ss"> minutes"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>'14.957884096489048 minutes'</code></pre>
</div>
</div>
<p>With the warm up, our overall average wait time is</p>
<div id="217d9c97" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ss">f"</span><span class="sc">{</span>means_over_trial_warmup<span class="sc">}</span><span class="ss"> minutes"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>'489.6061859393929 minutes'</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");
  console.log(document.getElementsByClassName("webex-check"));

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";

    check_answer_box_nodelist = this.parentNode.childNodes
    console.log(check_answer_box_nodelist)
    for (let i = 0; i < check_answer_box_nodelist.length; i++) {
      var cl_inner = check_answer_box_nodelist[i].classList;
      console.log("Nodelist", i, ":", cl_inner);
      if (typeof cl_inner !== "undefined")
        {
          if (cl_inner.contains("feedback")) {
            {/* console.log(cl_inner.contains("feedback")) */}
            {/* console.log(check_answer_box_nodelist[i].style.display) */}
            check_answer_box_nodelist[i].style.display = "block"
          }
        }

      }

  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";

    check_answer_box_nodelist = this.parentNode.childNodes
    console.log(check_answer_box_nodelist)
    for (let i = 0; i < check_answer_box_nodelist.length; i++) {
      var cl_inner = check_answer_box_nodelist[i].classList;
      console.log("Nodelist", i, ":", cl_inner);
      if (typeof cl_inner !== "undefined")
        {
          if (cl_inner.contains("feedback")) {
            {/* console.log(cl_inner.contains("feedback")) */}
            {/* console.log(check_answer_box_nodelist[i].style.display) */}
            check_answer_box_nodelist[i].style.display = "none"
          }
        }

      }

  }

}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");
  {/* console.log(e) */}
  {/* console.log(this) */}

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;

  var feedback = (this.getAttribute("feedback"))

  if (document.getElementById('feedbackDiv'+this.id) === null){

    var feedbackDiv = document.createElement("p");
    feedbackDiv.setAttribute("id", "feedbackDiv"+this.id);
    feedbackDiv.setAttribute("class", "feedback");

  } else {

    var feedbackDiv = document.getElementById('feedbackDiv'+this.id)
    feedbackDiv.innerHTML = "";

  }

  // Check if inside a 'check answers' box - if so and if answer box is
  // currently unchecked, ensure feedback is hidden
  if (this.parentElement.parentElement.classList.contains("unchecked")) {
    {/* console.log(this.parentElement.parentElement.classList); */}
    feedbackDiv.style.display = "none"
  } else {
    {/* console.log(this.parentElement.parentElement.classList); */}
    feedbackDiv.style.display = "block"
  }

  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
    feedbackDiv.innerHTML = feedback;
  	this.parentNode.insertAdjacentElement('afterend', feedbackDiv);
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
      feedbackDiv.innerHTML = feedback;
  	  this.parentNode.insertAdjacentElement('afterend', feedbackDiv);
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList
  var feedback = (this[this.selectedIndex].getAttribute("feedback"))

  if (document.getElementById('feedbackDiv'+this.id) === null){

    var feedbackDiv = document.createElement("p");
    feedbackDiv.setAttribute("id", "feedbackDiv"+this.id);
    feedbackDiv.setAttribute("class", "feedback");

  } else {

    var feedbackDiv = document.getElementById('feedbackDiv'+this.id)
    feedbackDiv.innerHTML = "";

  }

  feedbackDiv.innerHTML = feedback;
  this.parentNode.insertAdjacentElement('afterend', feedbackDiv);

  // Check if inside a 'check answers' box - if so and if answer box is
  // currently unchecked, ensure feedback is hidden
  if (this.parentElement.parentElement.classList.contains("unchecked")) {
    {/* console.log(this.parentElement.parentElement.classList); */}
    feedbackDiv.style.display = "none"
  } else {
    {/* console.log(this.parentElement.parentElement.classList); */}
    feedbackDiv.style.display = "block"
  }

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  var feedback = (checked_button.getAttribute("feedback"))
  if (feedback !== null & feedback !== "<b></b>") { feedback = feedback + "</br></br>" }

  if (document.getElementById('feedbackDiv'+this.id) === null){

    var feedbackDiv = document.createElement("div");
    feedbackDiv.setAttribute("id", "feedbackDiv"+this.id);
    feedbackDiv.setAttribute("class", "feedback");

  } else {

      var feedbackDiv = document.getElementById('feedbackDiv'+this.id)
      feedbackDiv.innerHTML = "";

  }

  const currentDiv = document.getElementById(this);
  feedbackDiv.innerHTML = feedback;
  this.insertAdjacentElement('afterend', feedbackDiv);

    // Check if inside a 'check answers' box - if so and if answer box is
  // currently unchecked, ensure feedback is hidden
  if (this.parentElement.classList.contains("unchecked")) {
      {/* console.log(this.parentElement.parentElement.classList); */}
      feedbackDiv.style.display = "none"
    } else {
      {/* console.log(this.parentElement.parentElement.classList); */}
      feedbackDiv.style.display = "block"
    }


  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");
    console.log(check_sections[i])

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    // check_func removes the 'unchecked' class from box
    // and updates the button text
    // subsequently recheck all possible question funcs
    // to ensure feedback gets shown or hidden as appropriate
    btn.onclick = check_func;

    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./extending_your_model.html" class="pagination-link" aria-label="extending_your_model.html">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">extending_your_model.html</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./visualising_model_metrics.html" class="pagination-link" aria-label="visualising_model_metrics.html">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">visualising_model_metrics.html</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>